@using credittrade.ViewModel
@{
    ViewBag.Title = "Список погашений";
    Layout = "layout.cshtml";
}

<form class="form-horizontal col-sm-8" id="pay_form">
    @Html.AntiForgeryToken()
    <h3>Заказ № @Model.request.id от @Model.request.date</h3>
    <h3>@Model.request.user.warehouse.postoffice.idx @Model.request.user.warehouse.name @Model.request.user.warehouse.postoffice.post.name</h3>
    <input type="hidden" name="request_id" value="@Model.request.id" />
    <div class="form-group">
        <label class="control-label col-sm-3" for="fio">ФИО покупателя:</label>
        <div class="col-sm-6">
            <label class="form-control" id="fio">@Model.request.buyerFio</label>
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-sm-3" for="cost">Сумма:</label>
        <div class="col-sm-6">
            <label class="form-control" id="cost">@Model.request.cost</label>
        </div>
    </div>
    @foreach (PayViewModel payViewModel in Model.request.pays)
    {
        <div class="">
            <h3 class="col-sm-offset-0">@payViewModel.type №@payViewModel.id от @payViewModel.date на сумму @payViewModel.cost</h3>
            <div class="dataTable_div">
                <table class="partials_table">
                    <thead>
                        <tr>
                            <th>Товар</th>
                            <th>Цена</th>
                            <th>Количество</th>
                            <th>Стоимость</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var rr in payViewModel.payments)
                        {
                            <tr>
                                <td>@rr.name</td>
                                <td>@rr.price</td>
                                <td>@rr.amount @rr.edizm</td>
                                <td>@rr.cost</td>
                            </tr>}
                    </tbody>
                </table>
            </div>
        </div>
    }
</form>


<script>
    var mutex = true;
    $(".partials_table").DataTable({
        "language": {
            "url": "@Url.Content("~/content/dataTables.ru.lang.json")"
        },
        paging: false,
        filter: false
    });
</script>